<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Keycloak Demo - Live Demo Checklist</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <!-- Custom styles -->
  <link href="/assets/css/styles.css" rel="stylesheet" />
  <link href="/assets/css/demo-checklist.css" rel="stylesheet" />
</head>
<body>
  <nav class="navbar navbar-expand-lg navbar-dark navbar-glass">
    <div class="container">
      <a class="navbar-brand" href="/">Keycloak Demo</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav me-auto mb-2 mb-lg-0">
          <li class="nav-item"><a class="nav-link" href="/">Home</a></li>
          <li class="nav-item"><a class="nav-link" href="/protected/">Protected area</a></li>
          <li class="nav-item"><a class="nav-link active" aria-current="page" href="/demo-checklist.html">Demo checklist</a></li>
        </ul>
        <div class="d-flex">
          <a class="btn btn-brand" href="/protected/">Sign in</a>
        </div>
      </div>
    </div>
  </nav>

  <main class="container hero">
    <div class="row">
      <div class="col-lg-10 col-xl-8">
        <h1 class="display-5 fw-bold">Live Demo Checklist (≈20 minutes)</h1>
        <p class="lead mb-4">Use the list below to guide a concise, high‑impact demonstration of Keycloak. Tick items as you complete them.</p>

        <div class="card">
          <div class="card-body">
            <div class="d-flex justify-content-between align-items-center mb-3">
              <h5 class="card-title mb-0">TODO List: Keycloak features to showcase</h5>
              <button id="reset-checklist" class="btn btn-sm btn-outline-light">Reset</button>
            </div>

            <div class="checklist">
              <div class="form-check">
                <input class="form-check-input" type="checkbox" id="todo-email-verify">
                <label class="form-check-label" for="todo-email-verify">
                  User email verification <span class="time-badge">2–3 min</span>
                </label>
                <div class="hint">Show a user with unverified email, send verification link, complete flow, and refresh userinfo to confirm.</div>
              </div>

              <div class="form-check">
                <input class="form-check-input" type="checkbox" id="todo-registration">
                <label class="form-check-label" for="todo-registration">
                  Self-service user registration <span class="time-badge">2–3 min</span>
                </label>
                <div class="hint">Enable registration (if disabled), walk through sign-up, verify account appears in Users.</div>
              </div>

              <div class="form-check">
                <input class="form-check-input" type="checkbox" id="todo-social">
                <label class="form-check-label" for="todo-social">
                  Social login / Identity brokering <span class="time-badge">2–3 min</span>
                </label>
                <div class="hint">Show how to add an identity provider (e.g., GitHub/Google) and perform a login with it.</div>
              </div>

              <div class="form-check">
                <input class="form-check-input" type="checkbox" id="todo-2fa">
                <label class="form-check-label" for="todo-2fa">
                  Two‑factor authentication (TOTP) <span class="time-badge">2–3 min</span>
                </label>
                <div class="hint">Require OTP for the realm or specific users, enroll an authenticator app, and log in.</div>
              </div>

              <div class="form-check">
                <input class="form-check-input" type="checkbox" id="todo-webauthn-flow">
                <label class="form-check-label" for="todo-webauthn-flow">
                  Authentication flows: WebAuthn <span class="time-badge">3–4 min</span>
                </label>
                <div class="hint">Clone the Browser flow, add a WebAuthn execution, override it on the client, and have a user enroll a security key on login.</div>
              </div>

              <div class="form-check">
                <input class="form-check-input" type="checkbox" id="todo-roles">
                <label class="form-check-label" for="todo-roles">
                  Roles, groups, and RBAC to protect routes <span class="time-badge">3–4 min</span>
                </label>
                <div class="hint">Assign a role/group in Admin Console and show access difference on a protected endpoint.</div>
                <div class="hint">RBAC = Role-Based Access Control</div>
              </div>

              <div class="form-check">
                <input class="form-check-input" type="checkbox" id="todo-mappers">
                <label class="form-check-label" for="todo-mappers">
                  Client scopes & protocol mappers (custom claims) <span class="time-badge">2–3 min</span>
                </label>
                <div class="hint">Add a custom user attribute and map it into the ID token; inspect token/userinfo.</div>
              </div>

              <div class="form-check">
                <input class="form-check-input" type="checkbox" id="todo-sessions">
                <label class="form-check-label" for="todo-sessions">
                  Event management <span class="time-badge">2 min</span>
                </label>
                <div class="hint">Enable user events, then perform logout/login and verify events in console.</div>
              </div>

              <div class="form-check">
                <input class="form-check-input" type="checkbox" id="todo-authz">
                <label class="form-check-label" for="todo-authz">
                  Fine‑grained authorization (Authorization Services) <span class="time-badge">3–4 min</span>
                </label>
                <div class="hint">Briefly showcase policies/permissions/resources for a client and demonstrate an access decision.</div>
              </div>

              <div class="form-check">
                <input class="form-check-input" type="checkbox" id="todo-themes">
                <label class="form-check-label" for="todo-themes">
                  Theming and login screen customization <span class="time-badge">1–2 min</span>
                </label>
                <div class="hint">Explain where themes live and how to apply a custom theme to the realm (show a simple example).</div>
              </div>

              <div class="form-check">
                <input class="form-check-input" type="checkbox" id="todo-policies">
                <label class="form-check-label" for="todo-policies">
                  Password policies and brute‑force detection <span class="time-badge">1–2 min</span>
                </label>
                <div class="hint">Show where to configure password complexity and lockout protections; attempt a weak password.</div>
              </div>
            </div>

            <hr class="my-4" />
            <p class="mb-0 hint">Tip: If timing is tight, prioritize Email verification, 2FA, RBAC, and Client mappers. The rest can be summarized verbally.</p>
          </div>
        </div>

        <!-- Collapsible steps for Fine-grained authorization (Authorization Services) -->
        <div class="card mt-4">
          <div class="card-body">
            <div class="d-flex justify-content-between align-items-center">
              <h5 class="card-title mb-0">Authorization Services – Setup steps</h5>
              <button class="btn btn-sm btn-outline-light" type="button" data-bs-toggle="collapse" data-bs-target="#authzSteps" aria-expanded="false" aria-controls="authzSteps">
                Show / Hide
              </button>
            </div>
            <div class="collapse mt-3" id="authzSteps">
              <p class="hint mb-2">Goal: briefly show resources, scopes, policies, and permissions for a client and demonstrate an access decision using the <em>Evaluate</em> tab.</p>
              <ol class="mb-3">
                <li>
                  Open Keycloak Admin Console and select the KCDEMO realm:<br/>
                  <a class="link-light-muted" href="https://auth.kcdemo.local:8443" target="_blank" rel="noopener">https://auth.kcdemo.local:8443</a>
                </li>
                <li>
                  Go to <strong>Clients</strong> ➜ <strong>kcdemo-portal</strong> ➜ <strong>Authorization</strong> and click <strong>Enable</strong> if not already enabled.
                </li>
                <li>
                  Create a <strong>Resource</strong>:
                  <ul class="mt-2">
                    <li>Name: <code>Reports</code></li>
                    <li>URIs: <code>/manager/*</code> or <code>/api/reports/*</code> (for demo purpose)</li>
                  </ul>
                </li>
                <li>
                  Create a <strong>Scope</strong> named <code>view</code>.
                </li>
                <li>
                  Create a <strong>Policy</strong> of type <strong>Role</strong> called <code>Managers only</code> and select the realm role <code>kcdemo-manager</code>.
                </li>
                <li>
                  Create a <strong>Permission</strong> (type <strong>Scope</strong>) called <code>View reports</code> that links:
                  <ul class="mt-2">
                    <li>Resources: <code>Reports</code></li>
                    <li>Scopes: <code>view</code></li>
                    <li>Policies: <code>Managers only</code></li>
                  </ul>
                </li>
                <li>
                  Demonstrate an access decision via <strong>Evaluate</strong>:
                  <ul class="mt-2">
                    <li>Select Resource: <code>Reports</code>, Scope: <code>view</code></li>
                    <li>User: <code>demo-manager</code> (has role via group) ➜ <strong>PERMIT</strong></li>
                    <li>User: <code>demo</code> ➜ <strong>DENY</strong></li>
                  </ul>
                </li>
              </ol>
              <p class="hint mb-0">Tip: For a pure UI demo, the <em>Evaluate</em> tab is enough. If you have a resource server, you can also show UMA/RPT enforcement; not required here.</p>
            </div>
          </div>
        </div>

        <!-- Collapsible steps for WebAuthn authentication flow -->
        <div class="card mt-4">
          <div class="card-body">
            <div class="d-flex justify-content-between align-items-center">
              <h5 class="card-title mb-0">WebAuthn authentication flow – Setup steps</h5>
              <button class="btn btn-sm btn-outline-light" type="button" data-bs-toggle="collapse" data-bs-target="#webauthnSteps" aria-expanded="false" aria-controls="webauthnSteps">
                Show / Hide
              </button>
            </div>
            <div class="collapse mt-3" id="webauthnSteps">
              <p class="hint mb-2">Goal: demonstrate how to modify a client’s authentication flow to include WebAuthn, and force a user to enroll a WebAuthn authenticator.</p>
              <ol class="mb-3">
                <li>
                  Open Keycloak Admin Console and select the KCDEMO realm:<br/>
                  <a class="link-light-muted" href="https://auth.kcdemo.local:8443" target="_blank" rel="noopener">https://auth.kcdemo.local:8443</a>
                </li>
                <li>
                  Verify realm WebAuthn policy (already preconfigured in this repo):<br/>
                  Realm Settings ➜ Security Defenses ➜ WebAuthn:
                  <ul class="mt-2">
                    <li>RP ID: <code>auth.kcdemo.local</code></li>
                    <li>RP Origins: <code>https://auth.kcdemo.local:8443</code></li>
                  </ul>
                </li>
                <li>
                  Create a dedicated flow to use for the client:
                  <ul class="mt-2">
                    <li>Authentication ➜ Flows ➜ <strong>Browser</strong> ➜ <strong>Actions ➜ Clone</strong>, name it <code>browser-webauthn-demo</code>.</li>
                    <li>In the cloned flow, in the <em>forms</em> subflow, click <strong>Add execution</strong> ➜ choose <strong>WebAuthn Authenticator</strong>, set Requirement to <strong>ALTERNATIVE</strong>.</li>
                    <li>Keep existing Username Password and OTP steps as-is for a simple demo.</li>
                  </ul>
                </li>
                <li>
                  Apply the flow to the client (override):<br/>
                  Clients ➜ <strong>kcdemo-portal</strong> ➜ <strong>Authentication flow overrides</strong> ➜ <strong>Browser flow</strong> = <code>browser-webauthn-demo</code> ➜ Save.
                </li>
                <li>
                  Use the prepared user to trigger WebAuthn enrollment:
                  <ul class="mt-2">
                    <li>User: <code>demo-webauthn</code> / password <code>demo</code></li>
                    <li>This user has the required action <code>webauthn-register</code> and will be prompted to enroll a security key.</li>
                  </ul>
                </li>
                <li>
                  Test the login: open the protected area and sign in as <code>demo-webauthn</code>. Enroll the authenticator when prompted and complete the login.
                </li>
              </ol>
              <p class="hint mb-0">Notes: You can also demo passwordless by adding the <em>WebAuthn Passwordless Authenticator</em> and using the <em>webauthn-register-passwordless</em> required action for a different user.</p>
            </div>
          </div>
        </div>

        <!-- Collapsible steps for Social login / Identity brokering -->
        <div class="card mt-4">
          <div class="card-body">
            <div class="d-flex justify-content-between align-items-center">
              <h5 class="card-title mb-0">Social login / Identity brokering – Setup steps</h5>
              <button class="btn btn-sm btn-outline-light" type="button" data-bs-toggle="collapse" data-bs-target="#socialSteps" aria-expanded="false" aria-controls="socialSteps">
                Show / Hide
              </button>
            </div>
            <div class="collapse mt-3" id="socialSteps">
              <p class="hint mb-2">This guide uses GitHub as an example identity provider.</p>
              <ol class="mb-3">
                <li>
                  Open Keycloak Admin Console and select the KCDEMO realm:<br/>
                  <a class="link-light-muted" href="https://auth.kcdemo.local:8443" target="_blank" rel="noopener">https://auth.kcdemo.local:8443</a>
                </li>
                <li>
                  In the left menu, go to <strong>Identity Providers</strong> and choose <strong>GitHub</strong>.
                </li>
                <li>
                  In another tab, create a GitHub OAuth App:<br/>
                  <a class="link-light-muted" href="https://github.com/settings/developers" target="_blank" rel="noopener">https://github.com/settings/developers</a>
                  <ul class="mt-2">
                    <li>Application name: e.g., KCDEMO</li>
                    <li>Homepage URL: <code>https://app.kcdemo.local</code></li>
                    <li>Authorization callback URL (redirect URI):</li>
                  </ul>
                  <pre class="code-block">https://auth.kcdemo.local:8443/realms/KCDEMO/broker/github/endpoint</pre>
                </li>
                <li>
                  After creating the OAuth App, copy the <strong>Client ID</strong> and generate/copy the <strong>Client secret</strong>.
                </li>
                <li>
                  Back in Keycloak (GitHub IdP page), paste the <strong>Client ID</strong> and <strong>Client Secret</strong>, then <strong>Save</strong>.
                </li>
                <li>
                  Optional: adjust settings (e.g., Default Scopes, Sync Mode) as needed. Defaults typically work for demos.
                </li>
                <li>
                  Test it: open the protected area and choose <em>Sign in with GitHub</em> on the Keycloak login page.
                </li>
              </ol>
              <p class="hint mb-0">Note: We do not pre-provision credentials in this repo for security reasons. Create and delete the GitHub OAuth app as needed for the live demo.</p>
            </div>
          </div>
        </div>

      </div>
    </div>
  </main>

  <footer class="container py-4">
    <p class="footer-muted mb-0">© Keycloak Demo</p>
  </footer>

  <!-- Bootstrap Bundle JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
  <!-- Page JS -->
  <script src="/assets/js/demo-checklist.js"></script>
  <!-- Main JS -->
  <script src="/assets/js/main.js"></script>
</body>
</html>
